<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Wheel Game</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #f0f0f0;
    padding: 20px;
  }
  #wheel {
    width: 300px;
    height: 300px;
    border-radius: 50%;
    border: 10px solid #333;
    margin: 0 auto;
    position: relative;
    overflow: hidden;
    transform: rotate(0deg);
    transition: transform 5s cubic-bezier(0.33, 1, 0.68, 1);
  }
  .segment {
    position: absolute;
    width: 50%;
    height: 50%;
    background: #ffcc00;
    transform-origin: 100% 100%;
    clip-path: polygon(100% 0, 100% 100%, 0 100%);
  }
  #pointer {
    width: 0; 
    height: 0; 
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-bottom: 40px solid red;
    margin: 20px auto;
  }
  #countdown {
    font-size: 24px;
    margin: 10px;
  }
  #message {
    font-size: 20px;
    margin: 10px;
  }
  #leaderboard {
    margin-top: 20px;
  }
  #badge {
    width: 100px;
    display: none;
    margin-top: 20px;
  }
</style>
</head>
<body>

<h1>Quiz Wheel Game</h1>

<div id="pointer"></div>
<div id="wheel">
  <div class="segment" style="transform: rotate(0deg); background:#ff6666"></div>
  <div class="segment" style="transform: rotate(60deg); background:#66ff66"></div>
  <div class="segment" style="transform: rotate(120deg); background:#6666ff"></div>
  <div class="segment" style="transform: rotate(180deg); background:#ff66ff"></div>
  <div class="segment" style="transform: rotate(240deg); background:#66ffff"></div>
  <div class="segment" style="transform: rotate(300deg); background:#ffff66"></div>
</div>

<div id="countdown">20</div>
<div id="message"></div>

<div id="leaderboard">
  <h3>Leaderboard</h3>
  <ol id="scores"></ol>
</div>

<img id="badge" src="badge.png" alt="Badge">

<audio id="applause" src="https://www.soundjay.com/human/applause-8.mp3"></audio>
<audio id="buzzer" src="https://www.soundjay.com/button/beep-07.mp3"></audio>

<script>
const wheel = document.getElementById('wheel');
const countdownEl = document.getElementById('countdown');
const messageEl = document.getElementById('message');
const scoresEl = document.getElementById('scores');
const badge = document.getElementById('badge');
const applause = document.getElementById('applause');
const buzzer = document.getElementById('buzzer');

let playerName = prompt("Enter your name before spinning:");
let score = 0;

let countdown = 20;
let countdownInterval;
let canSpin = true;

function startCountdown() {
  countdown = 20;
  countdownEl.textContent = countdown;
  countdownInterval = setInterval(() => {
    countdown--;
    countdownEl.textContent = countdown;
    if(countdown <= 0){
      clearInterval(countdownInterval);
      endGame(false);
    }
  }, 1000);
}

function spinWheel() {
  if(!canSpin) return;
  canSpin = false;
  messageEl.textContent = "";

  startCountdown();

  let spins = Math.floor(Math.random() * 360) + 720; // random spin + 2 full rotations
  wheel.style.transform = `rotate(${spins}deg)`;

  setTimeout(() => {
    clearInterval(countdownInterval);
    let result = Math.floor((spins % 360) / 60); // 6 segments
    let win = result === 0; // example: first segment = win
    endGame(win);
  }, 5000); // match wheel animation
}

function endGame(win) {
  if(win) {
    messageEl.textContent = "You won!";
    applause.play();
    badge.style.display = "block";
    score++;
  } else {
    messageEl.textContent = "You lost! Retry in 5 seconds...";
    buzzer.play();
    setTimeout(() => {
      messageEl.textContent = "";
      canSpin = true;
      badge.style.display = "none";
    }, 5000);
  }
  updateLeaderboard();
  setTimeout(() => location.reload(), 20000);
}

function updateLeaderboard() {
  let li = document.createElement('li');
  li.textContent = `${playerName}: ${score}`;
  scoresEl.appendChild(li);
}

// Spin wheel on click
wheel.addEventListener('click', spinWheel);
</script>

</body>
</html>
